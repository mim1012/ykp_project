<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🧪 매장 버튼 테스트</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="csrf-token" content="test-token">
</head>
<body class="bg-gray-50 p-6">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-2xl font-bold mb-6">🧪 매장 액션 버튼 테스트</h1>
        
        <!-- 테스트용 매장 카드 -->
        <div class="bg-white rounded-lg p-4 shadow border mb-4">
            <h3 class="font-bold text-lg mb-2">테스트매장_신규</h3>
            <div class="text-sm text-gray-600 space-y-1 mb-3">
                <p><span class="font-medium">코드:</span> BR001-007</p>
                <p><span class="font-medium">점주:</span> 지사테스트점주</p>
                <p><span class="font-medium">연락처:</span> 010-8888-9999</p>
            </div>
            
            <!-- 새로운 방식의 버튼들 -->
            <div class="mt-3 flex gap-2">
                <button data-store-id="8" data-store-name="테스트매장_신규" class="store-edit-btn px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600">✏️ 수정</button>
                <button data-store-id="8" data-store-name="테스트매장_신규" class="store-account-btn px-3 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600">👤 계정</button>
                <button data-store-id="8" data-store-name="테스트매장_신규" class="store-stats-btn px-3 py-1 bg-purple-500 text-white text-xs rounded hover:bg-purple-600">📊 성과</button>
                <button data-store-id="8" data-store-name="테스트매장_신규" class="store-delete-btn px-2 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600">🗑️ 삭제</button>
            </div>
        </div>
        
        <!-- 두 번째 매장 -->
        <div class="bg-white rounded-lg p-4 shadow border mb-4">
            <h3 class="font-bold text-lg mb-2">서울 1호점</h3>
            <div class="text-sm text-gray-600 space-y-1 mb-3">
                <p><span class="font-medium">코드:</span> BR001-001</p>
                <p><span class="font-medium">점주:</span> 김사장</p>
                <p><span class="font-medium">연락처:</span> 010-1111-1111</p>
            </div>
            
            <div class="mt-3 flex gap-2">
                <button data-store-id="1" data-store-name="서울 1호점" class="store-edit-btn px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600">✏️ 수정</button>
                <button data-store-id="1" data-store-name="서울 1호점" class="store-account-btn px-3 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600">👤 계정</button>
                <button data-store-id="1" data-store-name="서울 1호점" class="store-stats-btn px-3 py-1 bg-purple-500 text-white text-xs rounded hover:bg-purple-600">📊 성과</button>
                <button data-store-id="1" data-store-name="서울 1호점" class="store-delete-btn px-2 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600">🗑️ 삭제</button>
            </div>
        </div>
        
        <!-- 테스트 결과 -->
        <div class="bg-blue-50 rounded-lg p-4">
            <h2 class="font-bold mb-2">🔍 클릭 테스트 결과</h2>
            <div id="test-results" class="text-sm space-y-1">
                <p class="text-gray-600">버튼을 클릭해서 테스트해보세요...</p>
            </div>
        </div>
    </div>
    
    <script>
        // 🧪 매장 버튼 기능 테스트 스크립트
        console.log('🧪 매장 버튼 테스트 페이지 로드');
        
        // 이벤트 위임 방식으로 버튼 이벤트 등록
        document.addEventListener('click', function(e) {
            const target = e.target;
            const storeId = target.dataset.storeId;
            const storeName = target.dataset.storeName;
            
            if (!storeId) return;
            
            const resultsDiv = document.getElementById('test-results');
            const timestamp = new Date().toLocaleTimeString();
            
            function addResult(message, color = 'text-blue-600') {
                resultsDiv.innerHTML += `<p class="${color}">[${timestamp}] ${message}</p>`;
            }
            
            if (target.classList.contains('store-edit-btn')) {
                console.log('✏️ 매장 수정 버튼 클릭됨:', storeId, storeName);
                addResult(`✏️ 수정 버튼 작동! 매장: ${storeName} (ID: ${storeId})`, 'text-blue-600');
                alert(`매장 수정 모달이 열릴 예정입니다.\n매장: ${storeName}\nID: ${storeId}`);
                
            } else if (target.classList.contains('store-account-btn')) {
                console.log('👤 계정 생성 버튼 클릭됨:', storeId, storeName);
                addResult(`👤 계정 버튼 작동! 매장: ${storeName} (ID: ${storeId})`, 'text-green-600');
                if (confirm(`${storeName} 매장의 사용자 계정을 생성하시겠습니까?`)) {
                    addResult(`✅ 계정 생성 확인 완료 - ${storeName}`, 'text-green-700');
                }
                
            } else if (target.classList.contains('store-stats-btn')) {
                console.log('📊 성과 보기 버튼 클릭됨:', storeId, storeName);
                addResult(`📊 성과 버튼 작동! 매장: ${storeName} (ID: ${storeId})`, 'text-purple-600');
                alert(`${storeName} 매장 성과 대시보드가 열릴 예정입니다.\nID: ${storeId}`);
                
            } else if (target.classList.contains('store-delete-btn')) {
                console.log('🗑️ 삭제 버튼 클릭됨:', storeId, storeName);
                addResult(`🗑️ 삭제 버튼 작동! 매장: ${storeName} (ID: ${storeId})`, 'text-red-600');
                if (confirm(`정말로 "${storeName}" 매장을 삭제하시겠습니까?\n\n⚠️ 이 작업은 되돌릴 수 없습니다.`)) {
                    addResult(`⚠️ 삭제 확인됨 - ${storeName} (실제 API 호출은 스키핑)`, 'text-red-700');
                    console.log('🚑 실제 환경에서는 여기서 DELETE API 호출');
                }
            }
        });
        
        // 페이지 로드 완료
        document.addEventListener('DOMContentLoaded', function() {
            console.log('✅ 버튼 테스트 페이지 준비 완료');
            document.getElementById('test-results').innerHTML = '<p class="text-green-600">✅ 이벤트 리스너 등록 완료 - 버튼을 클릭해보세요!</p>';
        });
    </script>
</body>
</html>