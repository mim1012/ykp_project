<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>YKP ERP ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 p-6">
    <h1 class="text-3xl font-bold mb-6">ğŸ§ª YKP ERP ê¸°ëŠ¥ ì •ë°€ í…ŒìŠ¤íŠ¸</h1>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- ì—‘ì…€/ê³ ê¸‰ ì…ë ¥ í…ŒìŠ¤íŠ¸ -->
        <div class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-bold mb-4">ğŸ“‹ ê°œí†µí‘œ ì…ë ¥ ë§í¬ í…ŒìŠ¤íŠ¸</h2>
            <div class="space-y-2">
                <a href="/sales/excel-input" class="block bg-blue-500 text-white text-center py-2 rounded hover:bg-blue-600">
                    ğŸ“¤ ì—‘ì…€ ì…ë ¥ í…ŒìŠ¤íŠ¸
                </a>
                <a href="/sales/advanced-input-pro" class="block bg-green-500 text-white text-center py-2 rounded hover:bg-green-600">
                    âš™ï¸ ê³ ê¸‰ ì…ë ¥ í…ŒìŠ¤íŠ¸
                </a>
                <a href="/sales/complete-aggrid" class="block bg-purple-500 text-white text-center py-2 rounded hover:bg-purple-600">
                    ğŸ“‹ ì™„ì „í•œ ê°œí†µí‘œ í…ŒìŠ¤íŠ¸
                </a>
            </div>
        </div>

        <!-- API í…ŒìŠ¤íŠ¸ -->
        <div class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-bold mb-4">ğŸ”— API ì—°ê²° í…ŒìŠ¤íŠ¸</h2>
            <div class="space-y-2">
                <button onclick="testStoresAPI()" class="block w-full bg-orange-500 text-white py-2 rounded hover:bg-orange-600">
                    ğŸª ë§¤ì¥ API í…ŒìŠ¤íŠ¸
                </button>
                <button onclick="testBranchesAPI()" class="block w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600">
                    ğŸ¢ ì§€ì‚¬ API í…ŒìŠ¤íŠ¸
                </button>
                <button onclick="testAccountsAPI()" class="block w-full bg-purple-500 text-white py-2 rounded hover:bg-purple-600">
                    ğŸ‘¥ ê³„ì • API í…ŒìŠ¤íŠ¸
                </button>
            </div>
            <div id="api-result" class="mt-4 p-3 bg-gray-100 rounded text-sm">
                API í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
            </div>
        </div>

        <!-- CSV í…ŒìŠ¤íŠ¸ -->
        <div class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-bold mb-4">ğŸ“¤ CSV ë‚´ë³´ë‚´ê¸° í…ŒìŠ¤íŠ¸</h2>
            <div class="space-y-2">
                <button onclick="testCSVExport()" class="block w-full bg-green-500 text-white py-2 rounded hover:bg-green-600">
                    ğŸ“Š í…ŒìŠ¤íŠ¸ CSV ìƒì„±
                </button>
                <button onclick="testKoreanCSV()" class="block w-full bg-red-500 text-white py-2 rounded hover:bg-red-600">
                    ğŸ‡°ğŸ‡· í•œê¸€ CSV í…ŒìŠ¤íŠ¸
                </button>
            </div>
            <div class="mt-4 text-sm text-gray-600">
                <p>â€¢ UTF-8 BOM ì ìš© ì—¬ë¶€ í™•ì¸</p>
                <p>â€¢ ì—‘ì…€ì—ì„œ í•œê¸€ ì •ìƒ í‘œì‹œ í™•ì¸</p>
            </div>
        </div>

        <!-- ì‹œìŠ¤í…œ ìƒíƒœ -->
        <div class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-bold mb-4">âš¡ ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸</h2>
            <div class="space-y-2">
                <a href="/verify-accounts.php" class="block bg-gray-500 text-white text-center py-2 rounded hover:bg-gray-600">
                    ğŸ‘¥ ê³„ì • í˜„í™© í™•ì¸
                </a>
                <a href="/management/branches" class="block bg-blue-500 text-white text-center py-2 rounded hover:bg-blue-600">
                    ğŸ¢ ì§€ì‚¬ ê´€ë¦¬ í˜ì´ì§€
                </a>
                <a href="/admin/accounts" class="block bg-purple-500 text-white text-center py-2 rounded hover:bg-purple-600">
                    ğŸ‘¥ ê³„ì • ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ
                </a>
            </div>
        </div>
    </div>

    <script>
        async function testStoresAPI() {
            const result = document.getElementById('api-result');
            result.innerHTML = 'ğŸª ë§¤ì¥ API í…ŒìŠ¤íŠ¸ ì¤‘...';
            
            try {
                const response = await fetch('/test-api/stores');
                const data = await response.json();
                
                result.innerHTML = `
                    <strong>âœ… ë§¤ì¥ API ì„±ê³µ</strong><br>
                    ì´ ë§¤ì¥ ìˆ˜: ${data.data?.length || 0}ê°œ<br>
                    ì‘ë‹µ ìƒíƒœ: ${response.status}<br>
                    ë°ì´í„° ìƒ˜í”Œ: ${data.data?.[0]?.name || 'ì—†ìŒ'}
                `;
            } catch (error) {
                result.innerHTML = `âŒ ë§¤ì¥ API ì‹¤íŒ¨: ${error.message}`;
            }
        }

        async function testBranchesAPI() {
            const result = document.getElementById('api-result');
            result.innerHTML = 'ğŸ¢ ì§€ì‚¬ API í…ŒìŠ¤íŠ¸ ì¤‘...';
            
            try {
                const response = await fetch('/test-api/branches');
                const data = await response.json();
                
                result.innerHTML = `
                    <strong>âœ… ì§€ì‚¬ API ì„±ê³µ</strong><br>
                    ì´ ì§€ì‚¬ ìˆ˜: ${data.data?.length || 0}ê°œ<br>
                    ì‘ë‹µ ìƒíƒœ: ${response.status}<br>
                    ë°ì´í„° ìƒ˜í”Œ: ${data.data?.[0]?.name || 'ì—†ìŒ'}
                `;
            } catch (error) {
                result.innerHTML = `âŒ ì§€ì‚¬ API ì‹¤íŒ¨: ${error.message}`;
            }
        }

        async function testAccountsAPI() {
            const result = document.getElementById('api-result');
            result.innerHTML = 'ğŸ‘¥ ê³„ì • API í…ŒìŠ¤íŠ¸ ì¤‘...';
            
            try {
                const response = await fetch('/test-api/accounts/all');
                
                if (response.status === 403) {
                    result.innerHTML = `âš ï¸ ê³„ì • API: 403 Forbidden (ì¸ì¦ í•„ìš”)<br>ë³¸ì‚¬ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ í›„ ì ‘ê·¼ ê°€ëŠ¥`;
                    return;
                }
                
                const data = await response.json();
                result.innerHTML = `
                    <strong>âœ… ê³„ì • API ì„±ê³µ</strong><br>
                    ì´ ê³„ì • ìˆ˜: ${data.data?.length || 0}ê°œ<br>
                    ì‘ë‹µ ìƒíƒœ: ${response.status}
                `;
            } catch (error) {
                result.innerHTML = `âŒ ê³„ì • API ì‹¤íŒ¨: ${error.message}`;
            }
        }

        function testCSVExport() {
            const testData = [
                ['ì´ë¦„', 'ì´ë©”ì¼', 'ì—­í• ', 'ìƒíƒœ'],
                ['í…ŒìŠ¤íŠ¸ì‚¬ìš©ì', 'test@ykp.com', 'ë³¸ì‚¬', 'í™œì„±'],
                ['ê°¤ëŸ­ì‹œì‚¬ìš©ì', 'galaxy@ykp.com', 'ì§€ì‚¬', 'í™œì„±'],
                ['ë¶€ì‚°ê¹€ì§€ì‚¬ì¥', 'busan@ykp.com', 'ì§€ì‚¬', 'í™œì„±']
            ];
            
            const csvContent = testData.map(row => row.map(cell => `"${cell}"`).join(',')).join('\n');
            const blob = new Blob(['\ufeff' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `YKP_í…ŒìŠ¤íŠ¸_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
            
            alert('ğŸ“¤ í…ŒìŠ¤íŠ¸ CSV íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!\n\nì—‘ì…€ì—ì„œ ì—´ì–´ì„œ í•œê¸€ì´ ì •ìƒ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.');
        }

        function testKoreanCSV() {
            const koreanData = [
                ['ë§¤ì¥ëª…', 'ëª¨ë¸ëª…', 'ê³ ê°ëª…', 'ë©”ëª¨'],
                ['ë¶€ì‚°í•´ìš´ëŒ€ì ', 'ê°¤ëŸ­ì‹œ S24 ìš¸íŠ¸ë¼', 'í™ê¸¸ë™', 'ì‹ ê·œ ê°€ì…ì, ìš©ì‚°ì  ì¶”ì²œ'],
                ['ì„œìš¸ê°•ë‚¨ì ', 'iPhone 15 Pro', 'ê¹€ì² ìˆ˜', 'ê¸°ì¡´ ê³ ê°, VIP í˜œíƒ'],
                ['ëŒ€êµ¬ì¤‘êµ¬ì ', 'ê°¤ëŸ­ì‹œ Zí”Œë¦½6', 'ì´ì˜í¬', 'MNP ê³ ê°, í”„ë¦¬ë¯¸ì—„ í”Œëœ']
            ];
            
            const csvContent = koreanData.map(row => row.map(cell => `"${cell}"`).join(',')).join('\n');
            const blob = new Blob(['\ufeff' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `í•œê¸€í…ŒìŠ¤íŠ¸_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
            
            alert('ğŸ“¤ í•œê¸€ CSV íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!\n\nì´ íŒŒì¼ì„ ì—‘ì…€ì—ì„œ ì—´ì—ˆì„ ë•Œ:\nâ€¢ í•œê¸€ì´ ê¹¨ì§€ì§€ ì•Šê³  ì •ìƒ í‘œì‹œë˜ë©´ âœ… ì„±ê³µ\nâ€¢ í•œê¸€ì´ ê¹¨ì ¸ì„œ ë³´ì´ë©´ âŒ ì‹¤íŒ¨');
        }
    </script>
</body>
</html>