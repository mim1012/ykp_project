# 🧪 YKP ERP 시스템 내부 테스트 가이드

## 📋 테스트 준비사항

### 🚀 시스템 실행
```bash
# 터미널 1: Laravel 서버 실행
php artisan serve
# ✅ 확인: http://127.0.0.1:8000 접속 가능

# 터미널 2: YKP Settlement 실행 (정산표용)
cd ykp-settlement
npm run dev
# ✅ 확인: http://localhost:5173 (또는 다른 포트) 접속 가능
```

### 📊 테스트 데이터 확인
```bash
# 현재 데이터 현황 확인
php artisan tinker
>>> App\Models\Sale::count()
>>> App\Models\DealerProfile::count()
>>> App\Models\DailyExpense::count()
>>> App\Models\FixedExpense::count()
>>> App\Models\Payroll::count()
```

---

## 🏠 메인 대시보드 테스트

### 📍 접속: `http://localhost:8000`

### ✅ 테스트 체크리스트:

#### 1. 실시간 KPI 카드 확인
- [ ] **오늘 매출**: 실제 금액 표시되는가? (₩0 아님)
- [ ] **이번 달 매출**: 실제 금액 표시되는가?
- [ ] **VAT 포함 매출**: 자동 계산되는가?
- [ ] **목표 달성률**: 퍼센트로 표시되는가?

#### 2. 차트 데이터 확인  
- [ ] **30일 매출 추이**: 실제 데이터로 차트 그려지는가?
- [ ] **시장별 매출**: 도넛 차트에 통신사별 데이터 표시되는가?

#### 3. 사이드바 네비게이션 테스트
- [ ] **Y** (메인): 페이지 새로고침되는가?
- [ ] **📝** (개통입력): 간단한 AgGrid로 이동하는가?
- [ ] **📊** (정산표): 새 창으로 YKP Settlement 열리는가?
- [ ] **📋** (판매관리): 완전한 AgGrid로 이동하는가?
- [ ] **💳** (일일지출): 일일지출 페이지로 이동하는가?
- [ ] **💰** (고정지출): 고정지출 페이지로 이동하는가?
- [ ] **👥** (급여): 급여관리 페이지로 이동하는가?
- [ ] **⚙️** (관리자): 관리자 패널로 이동하는가?

#### 4. 툴팁 기능
- [ ] 각 아이콘에 마우스 올리면 설명 나타나는가?

---

## 📝 개통 데이터 입력 테스트

### 🎯 간단한 AgGrid (추천)
**접속**: 사이드바 📝 클릭 또는 `http://localhost:8000/test/simple-aggrid`

#### ✅ 기본 입력 테스트:
1. **새 행 추가**
   - [ ] "행 추가" 버튼 클릭 시 새 행 생성되는가?
   
2. **데이터 입력**
   - [ ] **대리점**: 드롭다운에서 선택 가능한가?
   - [ ] **통신사**: SKT, KT, LG 선택 가능한가?
   - [ ] **개통방식**: 신규, MNP, 기변 선택 가능한가?
   - [ ] **액면가**: 숫자 입력 시 천 단위 콤마 표시되는가?
   - [ ] **구두1, 구두2**: 입력 가능한가?

3. **실시간 계산 확인**
   - [ ] 금액 입력 시 **리베총계** 자동 계산되는가?
   - [ ] **정산금** 자동 계산되는가?
   - [ ] **세금** (13.3%) 자동 계산되는가?
   - [ ] **마진** 자동 계산되는가?

4. **저장 기능**
   - [ ] "저장" 버튼 클릭 시 성공 메시지 나타나는가?
   - [ ] 상단 통계 카드 실시간 업데이트되는가?

#### 📊 완전한 AgGrid 테스트
**접속**: 사이드바 📋 클릭 또는 `http://localhost:8000/test/complete-aggrid`

- [ ] **40개 전체 필드** 모두 표시되는가?
- [ ] **색상 구분**: 입력/계산/정책 필드별 색상 다른가?
- [ ] **엑셀 내보내기**: 버튼 작동하는가?
- [ ] **키보드 단축키**: Tab, Enter 이동 가능한가?

---

## 📊 정산표 시스템 테스트 (YKP Settlement)

### 🎯 접속 방법: 사이드바 📊 클릭

#### ✅ 정산표 기본 기능:
1. **새 행 추가**
   - [ ] **"새 행" 버튼** 클릭 시 빈 행 추가되는가?
   - [ ] **Ctrl + Enter** 단축키로 행 추가 가능한가?

2. **엑셀 스타일 입력**
   - [ ] **셀 클릭** 시 편집 모드 되는가?
   - [ ] **Tab 키** 다음 셀로 이동하는가?
   - [ ] **Enter 키** 아래 셀로 이동하는가?

3. **자동 검증 및 변환**
   - [ ] **통신사**: "sk" 입력 시 "SKT"로 변환되는가?
   - [ ] **개통방식**: 드롭다운으로 제한되는가?
   - [ ] **날짜**: YYYY-MM-DD 형식 자동 검증되는가?

4. **실시간 계산**
   - [ ] **액면가 + 구두1 + 구두2** = **리베총계** 자동 계산?
   - [ ] **정산금** = 리베총계 - 서류상현금 + 유심비 + 할인?
   - [ ] **부가세** = 정산금 × 13.3% 자동 계산?
   - [ ] **마진** = 정산금 - 부가세 + 현금받음 + 페이백?

5. **저장 및 로드**
   - [ ] **저장 버튼** (Ctrl + S) 클릭 시 성공 알림?
   - [ ] **페이지 새로고침** 후 데이터 유지되는가?
   - [ ] **Laravel DB에 실제 저장**되는가?

6. **프로파일 기반 기능**
   - [ ] **대리점 선택** 시 기본값 자동 채워지는가?
   - [ ] **F1 키** 단축키 도움말 모달 나타나는가?

---

## 💳 일일지출 관리 테스트

### 🎯 접속: 사이드바 💳 클릭 또는 `http://localhost:8000/daily-expenses`

#### ✅ 일일지출 기능 테스트:
1. **요약 카드 확인**
   - [ ] **오늘 지출**: 실시간 집계되는가?
   - [ ] **이번 달 지출**: 월별 합계 표시되는가?
   - [ ] **지출 건수**: 정확한 개수 표시되는가?
   - [ ] **평균 지출액**: 자동 계산되는가?

2. **지출 등록**
   - [ ] **지출일**: 날짜 선택 가능한가?
   - [ ] **대리점**: 드롭다운에 실제 대리점 목록 나타나는가?
   - [ ] **카테고리**: 상담비, 메일접수비, 기타 등 선택 가능한가?
   - [ ] **지출 금액**: 숫자 입력 가능한가?
   - [ ] **결제 방법**: 현금, 카드, 계좌이체 선택 가능한가?

3. **등록 및 확인**
   - [ ] **"지출 등록"** 버튼 클릭 시 성공 메시지?
   - [ ] **최근 지출 내역**에 방금 등록한 항목 나타나는가?
   - [ ] **요약 카드** 실시간 업데이트되는가?

---

## 💰 고정지출 관리 테스트

### 🎯 접속: 사이드바 💰 클릭 또는 `http://localhost:8000/fixed-expenses`

#### ✅ 고정지출 기능 테스트:
1. **요약 카드 확인**
   - [ ] **이번 달 고정지출**: 월별 합계 표시되는가?
   - [ ] **지급 대기**: pending 건수 정확한가?
   - [ ] **지급 완료**: paid 건수 정확한가?
   - [ ] **30일 내 지급 예정**: 예정 금액 표시되는가?

2. **고정지출 등록**
   - [ ] **정산 월**: month 타입 입력 가능한가?
   - [ ] **지출 유형**: 임대료, 인건비, 통신비 등 선택 가능한가?
   - [ ] **지급 예정일**: 날짜 선택 가능한가?
   - [ ] **지급 상태**: pending/paid 선택 가능한가?

3. **지급 관리**
   - [ ] **"지급 완료"** 버튼 클릭 시 상태 변경되는가?
   - [ ] **월별 필터**: 다른 월 선택 시 데이터 변경되는가?
   - [ ] **지급 예정 목록**: 30일 내 항목만 표시되는가?

---

## 👥 직원급여 관리 테스트 (엑셀 방식)

### 🎯 접속: 사이드바 👥 클릭 또는 `http://localhost:8000/payroll`

#### ✅ 급여 관리 기능 테스트:
1. **엑셀 스타일 그리드 확인**
   - [ ] **테이블 형태**로 급여 내역 표시되는가?
   - [ ] **색상 구분**: 수기입력(노란색), 자동계산(녹색) 구분되는가?

2. **직원 추가**
   - [ ] **"+ 직원 추가"** 버튼 클릭 시 모달 나타나는가?
   - [ ] **직원 정보** 입력 후 등록 가능한가?
   - [ ] **인센티브** 자동 계산되는가? (개통 실적 기반)

3. **엑셀 방식 편집**
   - [ ] **기본급 셀** 클릭 시 인라인 편집 가능한가?
   - [ ] **보너스 셀** 수정 시 총급여 자동 재계산되는가?
   - [ ] **공제액 셀** 수정 가능한가?

4. **지급 상태 관리**
   - [ ] **"미지급"** 버튼 클릭 시 "지급완료"로 변경되는가?
   - [ ] **지급일** 자동 설정되는가?
   - [ ] **요약 카드** 실시간 업데이트되는가?

5. **월별 필터링**
   - [ ] **월 선택** 시 해당 월 데이터만 표시되는가?
   - [ ] **대리점 필터** 작동하는가?

---

## 🔄 환수금액 & 기타 API 테스트

### 🎯 API 직접 테스트 (현재 페이지 없음)

#### ✅ 환수금액 API 테스트:
```bash
# 환수 목록 조회
curl "http://localhost:8000/api/refunds"

# 환수 등록 테스트
curl -X POST "http://localhost:8000/api/refunds" \
  -H "Content-Type: application/json" \
  -d '{
    "refund_date": "2024-01-20",
    "dealer_code": "DEFAULT",
    "customer_name": "홍길동",
    "customer_phone": "010-1234-5678",
    "refund_reason": "단순변심",
    "refund_type": "전액환불",
    "original_amount": 500000,
    "refund_amount": 500000,
    "penalty_amount": 50000
  }'
```

#### ✅ 확인 사항:
- [ ] 환수 등록 시 성공 응답하는가?
- [ ] 환수율 분석 API 작동하는가?

---

## ⚙️ 관리자 패널 테스트

### 🎯 접속: 사이드바 ⚙️ 클릭 또는 `http://localhost:8000/admin`

#### ✅ Filament 관리자 기능:
1. **로그인**
   - [ ] 관리자 로그인 페이지 나타나는가?
   - [ ] 테스트 계정으로 로그인 가능한가?

2. **데이터 관리**
   - [ ] **Sales** 리소스에서 모든 개통 데이터 조회 가능한가?
   - [ ] **필터링** 및 **검색** 기능 작동하는가?
   - [ ] **수정/삭제** 기능 작동하는가?

---

## 🔄 시스템 통합 테스트

### ✅ 데이터 흐름 테스트:

#### 1. 개통 → 대시보드 연동
```
1. 간단한 AgGrid에서 새 개통 데이터 입력
2. 저장 후 메인 대시보드로 이동
3. KPI 카드가 실시간 업데이트되는지 확인
```

#### 2. 정산표 → 대시보드 연동
```
1. YKP Settlement에서 새 정산 데이터 입력
2. 저장 후 메인 대시보드 새로고침
3. 매출 데이터가 반영되는지 확인
```

#### 3. 지출 → 재무 현황 연동
```
1. 일일지출에서 새 지출 등록
2. 고정지출에서 월별 지출 등록
3. 대시보드에서 지출이 반영되는지 확인
```

---

## 🧪 상세 기능 테스트 시나리오

### 📊 시나리오 1: 완전한 업무 흐름
```
Day 1: 새 개통 건 처리
├── 1. 간단한 AgGrid에서 개통 데이터 입력
├── 2. YKP Settlement에서 정산 계산
├── 3. 일일지출에서 상담비 입력
└── 4. 메인 대시보드에서 당일 성과 확인

Day 15: 급여 처리
├── 1. 급여 관리에서 직원 추가
├── 2. 인센티브 자동 계산 확인
├── 3. 기본급, 보너스 수기 입력
└── 4. 지급 상태 토글 테스트

Month End: 월마감 확인
├── 1. 대시보드에서 월별 성과 분석
├── 2. 지출 내역 종합 확인
├── 3. 급여 지급 완료 처리
└── 4. 다음 달 준비
```

### 📱 시나리오 2: 멀티 사용자 테스트
```
사용자 A (매장 직원):
├── 간단한 AgGrid로 개통 데이터 입력
└── 일일지출 등록

사용자 B (회계 담당):
├── YKP Settlement로 정산 처리
├── 고정지출 관리
└── 급여 처리

사용자 C (관리자):
├── 관리자 패널에서 전체 데이터 확인
├── 사용자 권한 관리
└── 통계 및 리포트 확인
```

---

## 🔍 성능 및 안정성 테스트

### ✅ 성능 테스트:
```bash
# API 응답 시간 측정
curl -w "응답시간: %{time_total}초\n" -o /dev/null -s "http://localhost:8000/api/dev/dashboard/overview"

# 대량 데이터 입력 테스트
# (YKP Settlement에서 여러 행 동시 입력)

# 동시 사용자 시뮬레이션
# (여러 브라우저 탭에서 동시 접속)
```

### ✅ 안정성 테스트:
- [ ] **페이지 새로고침** 시 데이터 유지되는가?
- [ ] **브라우저 뒤로가기** 정상 작동하는가?
- [ ] **잘못된 입력** 시 적절한 오류 메시지?
- [ ] **네트워크 끊김** 시 적절한 처리?

---

## 📝 테스트 결과 기록

### 🎯 테스트 완료 체크리스트:
```
□ 메인 대시보드 (8개 항목)
□ 간단한 AgGrid (4개 섹션)
□ 완전한 AgGrid (4개 항목)
□ YKP Settlement (6개 섹션)
□ 일일지출 관리 (3개 섹션)
□ 고정지출 관리 (3개 섹션)
□ 급여 관리 (5개 섹션)
□ 관리자 패널 (2개 섹션)
□ 시스템 통합 (3개 시나리오)
□ 성능/안정성 (2개 항목)
```

### 📊 발견된 이슈 기록:
```
이슈 #001: [날짜] [기능] [내용] [심각도: High/Medium/Low]
예) 이슈 #001: 2024-01-15 급여관리 인센티브 계산 오류 High

해결 방법: [구체적인 해결 방안]
담당자: [해결 담당자]
상태: [Open/In Progress/Resolved]
```

---

## 🎉 테스트 완료 후 확인사항

### ✅ 최종 검증:
- [ ] **모든 기능** 정상 작동 확인
- [ ] **데이터 무결성** 보장
- [ ] **사용자 경험** 만족도 확인
- [ ] **성능 기준** 달성 확인

**🚀 이 가이드대로 테스트하시면 모든 기능을 체계적으로 검증할 수 있습니다!**

어떤 기능부터 테스트해보시겠습니까? 🧪