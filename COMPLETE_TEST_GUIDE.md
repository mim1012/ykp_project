# 🧪 YKP ERP 시스템 완전 기능 테스트 가이드

## 🚀 시스템 실행 방법

### 📋 사전 준비
```bash
# 1. 프로젝트 디렉토리로 이동
cd D:\Project\ykp-dashboard

# 2. Laravel 서버 실행
php artisan serve
# ✅ 성공: "Server running on http://127.0.0.1:8000" 메시지 확인

# 3. YKP Settlement 실행 (별도 터미널)
cd ykp-settlement
npm run dev
# ✅ 성공: "Local: http://localhost:5173" (또는 다른 포트) 확인
```

### 🔍 시스템 상태 확인
```bash
# 데이터베이스 연결 확인
php artisan migrate:status
# ✅ 모든 마이그레이션이 "Ran" 상태인지 확인

# 테스트 데이터 확인
php artisan tinker
>>> App\Models\Sale::count()        # 개통 데이터
>>> App\Models\DealerProfile::count() # 대리점 프로파일
>>> App\Models\User::count()         # 사용자 계정
>>> exit
```

---

## 👤 계정별 로그인 테스트

### 🎯 접속: `http://localhost:8000`

### 📊 테스트 계정 목록
```
1. 🏢 본사 관리자
   이메일: admin@ykp.com
   비밀번호: password
   권한: 전체 데이터 + 모든 메뉴

2. 🏪 지사 관리자  
   이메일: br001@ykp.com
   비밀번호: password
   권한: BR001 지사 + 산하 매장

3. 🏬 매장 직원
   이메일: br001-001@ykp.com
   비밀번호: password
   권한: 해당 매장만

4. 🛠️ 개발자 (미래 추가 예정)
   이메일: dev@ykp.com
   비밀번호: password
   권한: 시스템 전체 + 개발 도구
```

### ✅ 로그인 테스트 체크리스트
- [ ] **로그인 페이지** 정상 표시되는가?
- [ ] **각 계정** 로그인 성공하는가?
- [ ] **계정별 대시보드 제목** 다르게 표시되는가?
  - 본사: "📊 본사 통합 대시보드"
  - 지사: "🏢 XX지사 대시보드"  
  - 매장: "🏪 XX매장 대시보드"
- [ ] **권한 배지** 색상 다르게 표시되는가?
- [ ] **데이터 접근 범위** 안내 메시지 정확한가?

---

## 🏠 메인 대시보드 완전 테스트

### 📊 실시간 데이터 확인

#### ✅ KPI 카드 테스트
- [ ] **오늘 매출**: 실제 금액 표시 (₩0 아님)
- [ ] **이번 달 매출**: 실제 금액 표시
- [ ] **개통 건수**: 실제 건수 표시
- [ ] **관리 범위**: 계정별 다르게 표시
  - 본사: "전체 매장"
  - 지사: "X개 매장"
  - 매장: "1개 매장"

#### ✅ 실시간 업데이트 테스트
```
테스트 방법:
1. 현재 KPI 수치 기록
2. 새 개통 데이터 입력 (사이드바 📝 클릭)
3. 메인 대시보드로 돌아와서 수치 변화 확인
4. 5분 대기 후 자동 새로고침 확인
```

#### ✅ 사이드바 권한 테스트
| 아이콘 | 본사 | 지사 | 매장 | 기능 |
|-------|------|------|------|------|
| Y | ✅ | ✅ | ✅ | 메인 대시보드 |
| 📝 | ✅ | ✅ | ✅ | 간단한 개통 입력 |
| 📊 | ✅ | ✅ | ✅ | 정산표 시스템 |
| 📋 | ✅ | ✅ | ❌ | 완전한 판매관리 |
| 💳 | ✅ | ✅ | ✅ | 일일지출 관리 |
| 💰 | ✅ | ✅ | ❌ | 고정지출 관리 |
| 👥 | ✅ | ✅ | ❌ | 직원급여 관리 |
| ⚙️ | ✅ | ❌ | ❌ | 관리자 패널 |

**테스트 방법**: 각 계정으로 로그인 후 위 표대로 접근 가능/불가능 확인

---

## 📝 개통 데이터 입력 완전 테스트

### 🎯 간단한 AgGrid 테스트
**접속**: 사이드바 📝 클릭 또는 `http://localhost:8000/test/simple-aggrid`

#### ✅ 기본 기능 테스트
1. **새 행 추가**
   - [ ] "행 추가" 버튼 클릭 시 새 행 생성?
   - [ ] 빈 행에 기본값 자동 채워지는가?

2. **데이터 입력 검증**
   ```
   테스트 데이터:
   - 대리점: DEFAULT 선택
   - 통신사: SKT 선택  
   - 개통방식: 신규 선택
   - 모델명: 갤럭시 S24
   - 액면가: 500000
   - 구두1: 30000
   - 구두2: 20000
   ```

3. **실시간 계산 확인**
   - [ ] **리베총계**: 550,000 자동 계산?
   - [ ] **정산금**: 자동 계산?
   - [ ] **세금**: 13.3% 자동 계산?
   - [ ] **마진**: 자동 계산?

4. **저장 및 확인**
   - [ ] "저장" 버튼 클릭 시 성공 메시지?
   - [ ] 상단 통계 카드 업데이트?
   - [ ] 메인 대시보드 KPI 반영?

#### ✅ 권한별 데이터 확인
```
테스트 시나리오:
1. 매장 직원으로 로그인 → 개통 입력
2. 지사 관리자로 로그인 → 해당 데이터 조회 가능?
3. 본사 관리자로 로그인 → 모든 데이터 조회 가능?
```

### 🎯 완전한 AgGrid 테스트  
**접속**: 사이드바 📋 클릭 또는 `http://localhost:8000/test/complete-aggrid`

#### ✅ 고급 기능 테스트
- [ ] **40개 전체 필드** 모두 표시?
- [ ] **색상 구분**: 입력(노란색), 계산(녹색), 정책(보라색)?
- [ ] **엑셀 내보내기** 버튼 작동?
- [ ] **키보드 단축키**: Tab, Enter, Ctrl+S?

---

## 📊 정산표 시스템 완전 테스트 (YKP Settlement)

### 🎯 접속: 사이드바 📊 클릭

#### ✅ 새 창 열림 확인
- [ ] 새 창으로 YKP Settlement 정상 실행?
- [ ] 포트 주소 정확히 연결? (5173, 5174, 5175 중 하나)

#### ✅ 정산표 기본 기능
1. **새 행 추가**
   - [ ] **"새 행" 버튼** 클릭 시 빈 행 추가?
   - [ ] **Ctrl + Enter** 단축키로 행 추가?

2. **엑셀 스타일 입력**
   ```
   테스트 데이터 입력:
   - 판매자: 김영업
   - 대리점: 용산점 (드롭다운 선택)
   - 통신사: sk (자동으로 SKT 변환되는지)
   - 개통방식: 신규 (드롭다운)
   - 모델명: 아이폰 15
   - 개통일: 2024-01-15
   - 고객명: 홍길동
   - 액면가: 800000
   - 구두1: 40000
   - 구두2: 25000
   ```

3. **자동 계산 검증**
   - [ ] **리베총계**: 865,000 자동 계산?
   - [ ] **정산금**: 리베총계 - 서류상현금 + 유심비 + 할인?
   - [ ] **부가세**: 정산금 × 13.3%?
   - [ ] **세후마진**: 정산금 - 부가세 + 현금받음 + 페이백?

4. **저장 및 연동**
   - [ ] **Ctrl + S** 저장 시 성공 알림?
   - [ ] **Laravel DB에 실제 저장**? (새로고침 후 데이터 유지)
   - [ ] **메인 대시보드** 즉시 반영?

#### ✅ 고급 기능 테스트
- [ ] **F1 키**: 단축키 도움말 모달?
- [ ] **Ctrl + Z**: 실행취소?
- [ ] **Delete 키**: 행 삭제?
- [ ] **복사/붙여넣기**: Ctrl+C, Ctrl+V?

---

## 💳 일일지출 관리 완전 테스트

### 🎯 접속: 사이드바 💳 클릭 또는 `http://localhost:8000/daily-expenses`

#### ✅ 지출 관리 기능
1. **요약 카드 실시간 확인**
   - [ ] **오늘 지출**: 실시간 집계?
   - [ ] **이번 달 지출**: 월별 합계?
   - [ ] **지출 건수**: 정확한 개수?
   - [ ] **평균 지출액**: 자동 계산?

2. **지출 등록 테스트**
   ```
   테스트 데이터:
   - 지출일: 오늘 날짜
   - 대리점: DEFAULT
   - 카테고리: 상담비
   - 지출 금액: 50000
   - 결제 방법: 현금
   - 승인자: 김점장
   - 내용: 고객 상담 인센티브
   ```

3. **등록 후 확인**
   - [ ] **성공 메시지**: "✅ 지출이 등록되었습니다!"?
   - [ ] **최근 지출 내역**에 즉시 추가?
   - [ ] **요약 카드** 실시간 업데이트?

#### ✅ 권한별 접근 테스트
- [ ] **매장 직원**: 자신의 매장 지출만 등록 가능?
- [ ] **지사 관리자**: 산하 매장 지출 조회 가능?
- [ ] **본사 관리자**: 모든 지출 조회 가능?

---

## 💰 고정지출 관리 완전 테스트

### 🎯 접속: 사이드바 💰 클릭 또는 `http://localhost:8000/fixed-expenses`

#### ✅ 권한 확인 먼저
- [ ] **매장 직원**: 접근 차단되고 권한 없음 알림?
- [ ] **지사/본사**: 정상 접근?

#### ✅ 고정지출 기능 (지사/본사만)
1. **월별 관리 확인**
   - [ ] **월 선택**: 드롭다운에서 여러 월 선택 가능?
   - [ ] **데이터 필터링**: 월별로 다른 데이터 표시?

2. **고정지출 등록**
   ```
   테스트 데이터:
   - 정산 월: 2025-08
   - 대리점: DEFAULT
   - 지출 유형: 임대료
   - 지출 금액: 2000000
   - 지급 예정일: 2025-08-31
   - 상세 내용: 매장 임대료
   ```

3. **지급 상태 관리**
   - [ ] **"지급 완료"** 버튼 클릭 시 상태 변경?
   - [ ] **지급일** 자동 설정?
   - [ ] **요약 카드** 즉시 업데이트?

4. **지급 예정 조회**
   - [ ] **30일 내 지급 예정** 목록 표시?
   - [ ] **D-day 표시**: 3일 후, 7일 후 등?

---

## 👥 직원급여 관리 완전 테스트 (엑셀 방식)

### 🎯 접속: 사이드바 👥 클릭 또는 `http://localhost:8000/payroll`

#### ✅ 권한 확인
- [ ] **매장 직원**: 접근 차단?
- [ ] **지사/본사**: 정상 접근?

#### ✅ 엑셀 스타일 급여 관리
1. **직원 추가**
   - [ ] **"+ 직원 추가"** 버튼 클릭 시 모달?
   ```
   테스트 데이터:
   - 직원 ID: EMP999
   - 직원명: 테스트직원
   - 대리점: DEFAULT
   - 직급: 직원
   - 기본급: 2000000
   ```

2. **인센티브 자동 계산**
   - [ ] **등록 시** 인센티브 자동 계산?
   - [ ] **개통 실적 기반** 계산 정확?
   - [ ] **직급별 비율** 적용? (점장 100%, 직원 50%)

3. **엑셀 방식 편집**
   - [ ] **기본급 셀** 클릭 시 인라인 편집?
   - [ ] **보너스 입력** 시 총급여 자동 재계산?
   - [ ] **공제액 입력** 시 실지급액 변경?

4. **지급 상태 토글**
   - [ ] **"미지급"** 클릭 시 "지급완료" 변경?
   - [ ] **지급일** 자동 설정?
   - [ ] **요약 카드** 실시간 반영?

#### ✅ 월별 급여 처리
- [ ] **월 선택** 시 해당 월 급여만 표시?
- [ ] **대리점 필터** 작동?
- [ ] **지급 상태 필터** (미지급/지급완료) 작동?

---

## 🔄 시스템 통합 테스트

### 📊 완전한 데이터 흐름 테스트

#### ✅ 시나리오 1: 매장 → 지사 → 본사 데이터 흐름
```
Step 1: 매장 직원 업무
1. br001-001@ykp.com 로그인
2. 개통 데이터 1건 입력 (간단한 AgGrid)
3. 일일지출 1건 등록 (상담비)
4. 로그아웃

Step 2: 지사 관리자 확인  
1. br001@ykp.com 로그인
2. 대시보드에서 해당 매장 데이터 반영 확인
3. 급여 관리에서 해당 매장 직원 인센티브 증가 확인
4. 로그아웃

Step 3: 본사 관리자 확인
1. admin@ykp.com 로그인
2. 전체 통합 대시보드에서 데이터 반영 확인
3. 관리자 패널에서 상세 데이터 확인
```

#### ✅ 시나리오 2: 정산표 연동 테스트
```
1. YKP Settlement에서 새 정산 데이터 입력
2. 저장 후 성공 알림 확인
3. 메인 대시보드 새로고침
4. KPI 카드에 즉시 반영되는지 확인
5. 다른 계정으로 로그인해서 권한별 반영 확인
```

#### ✅ 시나리오 3: 권한 차단 테스트
```
1. 매장 직원 계정으로 로그인
2. 급여관리 메뉴 클릭 → 권한 없음 알림?
3. 고정지출 메뉴 클릭 → 권한 없음 알림?
4. 관리자 패널 클릭 → 권한 없음 알림?
```

---

## ⚙️ 관리자 패널 완전 테스트

### 🎯 접속: 사이드바 ⚙️ 클릭 또는 `http://localhost:8000/admin`

#### ✅ 관리자 로그인 (본사만)
- [ ] **본사 계정**: 정상 로그인?
- [ ] **지사/매장 계정**: 접근 차단?

#### ✅ 사용자 관리 기능
1. **사용자 목록**
   - [ ] **모든 사용자** 목록 표시?
   - [ ] **역할별 필터링** 가능?
   - [ ] **지사별 필터링** 가능?

2. **새 사용자 추가** (매장 개점 시나리오)
   ```
   테스트: 새 매장 직원 계정 생성
   - 이름: 신규직원
   - 이메일: new-store@ykp.com  
   - 비밀번호: password
   - 역할: 매장
   - 지사: BR001 선택
   - 매장: 해당 매장 선택
   ```

3. **계정 생성 후 확인**
   - [ ] **계정 생성** 성공?
   - [ ] **새 계정으로 로그인** 가능?
   - [ ] **권한 정상** 적용?

#### ✅ 데이터 관리 기능
- [ ] **Sales 리소스**: 모든 개통 데이터 조회?
- [ ] **필터링/검색**: 정상 작동?
- [ ] **수정/삭제**: 가능?

---

## 🔍 성능 및 안정성 테스트

### ✅ API 성능 테스트
```bash
# API 응답 시간 측정
curl -w "응답시간: %{time_total}초\n" -o /dev/null -s "http://localhost:8000/api/dev/dashboard/overview"

# 목표: 1초 이내 응답
```

### ✅ 동시 사용자 테스트
```
1. 여러 브라우저 탭으로 다른 계정 동시 로그인
2. 각 계정에서 동시에 데이터 입력
3. 서로 다른 권한 범위 데이터 표시되는지 확인
4. 실시간 업데이트 정상 작동하는지 확인
```

### ✅ 안정성 테스트
- [ ] **페이지 새로고침**: 데이터 유지?
- [ ] **브라우저 뒤로가기**: 정상 작동?
- [ ] **잘못된 입력**: 적절한 오류 메시지?
- [ ] **네트워크 일시 끊김**: 자동 복구?

---

## 📊 오류 시나리오 테스트

### ✅ 데이터 검증 테스트
```
잘못된 입력 테스트:
1. 음수 금액 입력 → 오류 메시지?
2. 잘못된 날짜 형식 → 자동 교정 또는 오류?
3. 필수 필드 누락 → 저장 방지?
4. 중복 데이터 입력 → 적절한 처리?
```

### ✅ 권한 우회 시도 테스트
```
보안 테스트:
1. 매장 직원이 URL 직접 입력으로 급여관리 접근 시도
2. 지사 관리자가 다른 지사 데이터 API 직접 호출 시도
3. 로그아웃 후 뒤로가기로 보호된 페이지 접근 시도
```

---

## ✅ 테스트 완료 체크리스트

### 🎯 기본 기능 (필수)
```
□ 로그인 시스템 (3개 계정)
□ 메인 대시보드 실시간 데이터
□ 사이드바 권한별 메뉴 제어
□ 간단한 개통 입력
□ YKP Settlement 정산표
□ 일일지출 관리
```

### ⚡ 고급 기능 (권장)
```
□ 완전한 AgGrid (40개 필드)
□ 고정지출 관리 (지사/본사만)
□ 직원급여 관리 (엑셀 방식)
□ 관리자 패널 (사용자 관리)
□ 권한별 데이터 필터링
□ 계정별 접근 제어
```

### 🔍 통합 테스트 (완전)
```
□ 매장 → 지사 → 본사 데이터 흐름
□ 정산표 → 대시보드 실시간 연동
□ 권한 차단 및 보안 테스트
□ 동시 사용자 테스트
□ 성능 및 안정성 테스트
```

---

## 📝 테스트 결과 기록 양식

### 🎯 발견된 이슈 기록
```
이슈 #001
날짜: 2024-XX-XX
기능: [기능명]
내용: [구체적 문제 설명]
재현 방법: [단계별 재현 방법]
심각도: High/Medium/Low
상태: Open/In Progress/Resolved
```

### 📊 테스트 완료 확인
```
✅ 모든 기본 기능 정상 작동
✅ 권한별 접근 제어 완벽
✅ 실시간 데이터 연동 확인
✅ 사용자 경험 만족도 양호
✅ 성능 기준 달성 (1초 이내)
```

---

## 🎉 테스트 성공 기준

### 🏆 Pass 조건
- **기본 기능**: 90% 이상 정상 작동
- **권한 제어**: 100% 정확한 차단/허용
- **데이터 무결성**: 입력/저장/조회 일관성
- **사용자 경험**: 직관적이고 오류 없음

### 🚀 실사용 준비 완료 조건
- **모든 계정** 로그인 및 기능 정상
- **데이터 연동** 실시간 반영
- **권한 시스템** 완벽 작동
- **성능 기준** 달성

**🎯 이 가이드대로 테스트하시면 전체 시스템을 완벽하게 검증할 수 있습니다!** 🧪✨